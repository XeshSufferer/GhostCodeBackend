# Token Factory

## DTO:

### Refresh Request DTO

DTO запроса на регистрацию, в JSON выглядит как:

```

{
  "token": "string"
}

```

token - актуальный рефреш токен


## Актуальные эндпоинты:

### POST /refresh

Принимает Refresh Request DTO (см. раздел с DTO)


- 400 - invalid refresh token. Рефреш токен просрочен или он несуществует

- 200 - Успешный рефреш, возвращает JSON 
```
{
    "newRefresh": "string",
    "newJwt": "string"
}
```

1. newRefresh - Новый рефреш Токен (старый автоматически убивается)
2. newJwt - Валидный JWT

### GET /checkToken

**ТРЕБУЕТ ВАЛИДНЫЙ JWT**

Не принимает ничего, нужно просто иметь в авторизации (Bearer) JWT токен. Проверяет валидность токена в запросе.

- 401 - Токен не валиден, истек или не имеет верной сигнатуры

- 200 - Токен валиден, не истек и имеет верную сигнатуру. Возвращает текст "valid" 


===

## Rate Limits ⚡

- **Глобальный лимит**: 7 запросов в минуту  
- **При превышении**: таймаут на 3 часа

### Важные замечания:
- Особенно важно для /refresh - не вызывать слишком часто
- /checkToken тоже учитывается в лимите
- Длительный таймаут (3 часа) - защита от брутфорса
